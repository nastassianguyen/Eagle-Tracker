{"ast":null,"code":"import _regeneratorRuntime from\"/Users/nastassianguyen/Desktop/proj/EagleTracker/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _createForOfIteratorHelper from\"/Users/nastassianguyen/Desktop/proj/EagleTracker/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";import _asyncToGenerator from\"/Users/nastassianguyen/Desktop/proj/EagleTracker/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/nastassianguyen/Desktop/proj/EagleTracker/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/nastassianguyen/Desktop/proj/EagleTracker/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/nastassianguyen/Desktop/proj/EagleTracker/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/nastassianguyen/Desktop/proj/EagleTracker/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";/* \nfile: Dashboard.tsx \n    file for the dashboard display of the devices\n*/import React,{Component}from'react';import'./App.css';import{UserApi}from\"./lb-api\";import{Configuration}from\"./lb-api/configuration\";export var Dashboard=/*#__PURE__*/function(_Component){_inherits(Dashboard,_Component);var _super=_createSuper(Dashboard);function Dashboard(props){var _this;_classCallCheck(this,Dashboard);_this=_super.call(this,props);_this.state={devices:[],rows:[]};return _this;}// get list of devices in an array \n_createClass(Dashboard,[{key:\"getDevices\",value:function(){var _getDevices=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var config,userApi,token,allDevices,devices,_iterator,_step,device,rows,i;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;config=new Configuration();userApi=new UserApi(config);_context.prev=3;_context.next=6;return userApi.userLogin({username:process.env.REACT_APP_LIGHTBUG_API_USERNAME,password:process.env.REACT_APP_LIGHTBUG_API_PASSWORD});case 6:token=_context.sent;config.accessToken=token.id;config.userId=\"\".concat(token.userId);_context.next=16;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](3);console.error('Login Failed');alert('Login Fail');return _context.abrupt(\"return\");case 16:_context.next=18;return userApi.userPrototypeGetDevices(config.userId,JSON.stringify({where:{lastConnection:{gt:+new Date()-14*24*3600*1000}}}));case 18:allDevices=_context.sent;devices=[];_iterator=_createForOfIteratorHelper(allDevices);_context.prev=21;_iterator.s();case 23:if((_step=_iterator.n()).done){_context.next=30;break;}device=_step.value;if(device.id){_context.next=27;break;}return _context.abrupt(\"continue\",28);case 27:// prevent error on next line\ndevices.push(device);case 28:_context.next=23;break;case 30:_context.next=35;break;case 32:_context.prev=32;_context.t1=_context[\"catch\"](21);_iterator.e(_context.t1);case 35:_context.prev=35;_iterator.f();return _context.finish(35);case 38:rows=[];for(i=0;i<allDevices.length;i+=3){if(i+2<allDevices.length){rows.push(/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-sm\",children:/*#__PURE__*/_jsxs(\"a\",{className:\"button\",href:\"/devices/\".concat(allDevices[i].id),children:[\"Device \",allDevices[i].name]})},allDevices[i].id),/*#__PURE__*/_jsx(\"div\",{className:\"col-sm\",children:/*#__PURE__*/_jsxs(\"a\",{className:\"button\",href:\"/devices/\".concat(allDevices[i+1].id),children:[\"Device \",allDevices[i+1].name]})},allDevices[i+1].id),/*#__PURE__*/_jsx(\"div\",{className:\"col-sm\",children:/*#__PURE__*/_jsxs(\"a\",{className:\"button\",href:\"/devices/\".concat(allDevices[i+2].id),children:[\"Device \",allDevices[i+2].name]})},allDevices[i+2].id)]},i));}else if(i+2<=allDevices.length){rows.push(/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-sm\",children:/*#__PURE__*/_jsxs(\"a\",{className:\"button\",href:\"/devices/\".concat(allDevices[i].id),children:[\"Device \",allDevices[i].name]})},allDevices[i].id),/*#__PURE__*/_jsx(\"div\",{className:\"col-sm\",children:/*#__PURE__*/_jsxs(\"a\",{className:\"button\",href:\"/devices/\".concat(allDevices[i+1].id),children:[\"Device \",allDevices[i+1].name]})},allDevices[i+1].id),/*#__PURE__*/_jsx(\"div\",{className:\"col-sm\"},999)]},i));}else if(i+1<=allDevices.length){rows.push(/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-sm\",children:/*#__PURE__*/_jsxs(\"a\",{className:\"button\",href:\"/devices/\".concat(allDevices[i].id),children:[\"Device \",allDevices[i].name]})},allDevices[i].id),/*#__PURE__*/_jsx(\"div\",{className:\"col-sm\"},999),/*#__PURE__*/_jsx(\"div\",{className:\"col-sm\"},998)]},i));}}this.setState({devices:devices});this.setState({rows:rows});_context.next=47;break;case 44:_context.prev=44;_context.t2=_context[\"catch\"](0);console.error(\"Failed to get data\",_context.t2);case 47:case\"end\":return _context.stop();}}},_callee,this,[[0,44],[3,11],[21,32,35,38]]);}));function getDevices(){return _getDevices.apply(this,arguments);}return getDevices;}()// return promist after component mounts to DOM\n},{key:\"componentDidMount\",value:function componentDidMount(){this.getDevices().then();}// render function - displays listing of devices as links \n},{key:\"render\",value:function render(){var _rows;return/*#__PURE__*/_jsx(\"span\",{className:\"responsive-padding\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card fluid\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"section\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"Eagle Tracker Database\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"section double-padded\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:((_rows=this.state.rows)===null||_rows===void 0?void 0:_rows.length)?this.state.rows:'Loading...'})})]})});}}]);return Dashboard;}(Component);export default Dashboard;","map":{"version":3,"sources":["/Users/nastassianguyen/Desktop/proj/EagleTracker/src/Dashboard.tsx"],"names":["React","Component","UserApi","Configuration","Dashboard","props","state","devices","rows","config","userApi","userLogin","username","process","env","REACT_APP_LIGHTBUG_API_USERNAME","password","REACT_APP_LIGHTBUG_API_PASSWORD","token","accessToken","id","userId","console","error","alert","userPrototypeGetDevices","JSON","stringify","where","lastConnection","gt","Date","allDevices","device","push","i","length","name","setState","getDevices","then"],"mappings":"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","sourcesContent":["/* \nfile: Dashboard.tsx \n    file for the dashboard display of the devices\n*/\n\nimport React, {Component} from 'react';\nimport './App.css';\nimport {UserApi} from \"./lb-api\";\nimport {Configuration} from \"./lb-api/configuration\";\n\n\ninterface dashboardState {\n    devices: any[];\n    rows: any[]\n}\n\nexport class Dashboard extends Component<{}, dashboardState> {\n    constructor(props:any) {\n        super(props);\n        this.state = { \n            devices: [],\n            rows: []\n         };\n    }\n\n    // get list of devices in an array \n    async getDevices() {\n        try {\n            const config = new Configuration();\n            const userApi = new UserApi(config);\n            try {\n                let token = await userApi.userLogin({username: process.env.REACT_APP_LIGHTBUG_API_USERNAME, password: process.env.REACT_APP_LIGHTBUG_API_PASSWORD});\n                config.accessToken = token.id;\n                config.userId = `${token.userId}`;\n\n            } catch {\n                console.error('Login Failed')\n                alert('Login Fail');\n                return;\n            }\n\n            let allDevices = await userApi.userPrototypeGetDevices(config.userId,\n                JSON.stringify({where: {lastConnection : {gt: +new Date() - 14 * 24 * 3600 * 1000} }})\n            );\n\n            const devices: any[] = [];\n            for (const device of allDevices) {\n                if (!device.id) continue; // prevent error on next line\n                devices.push(device);\n            }\n\n            const rows: any[] = []\n            for (var i = 0; i < allDevices.length; i+=3) {\n                if (i + 2 < allDevices.length) {\n                    rows.push(\n                        <div key={i} className=\"row\">\n                            <div key={allDevices[i].id} className=\"col-sm\">\n                                <a className=\"button\" href={`/devices/${allDevices[i].id}`}>Device {allDevices[i].name}</a>\n                            </div>\n                            <div key={allDevices[i+1].id}className=\"col-sm\">\n                                <a className=\"button\" href={`/devices/${allDevices[i+1].id}`}>Device {allDevices[i+1].name}</a>\n                            </div>\n                            <div key={allDevices[i+2].id}className=\"col-sm\">\n                                <a className=\"button\" href={`/devices/${allDevices[i+2].id}`}>Device {allDevices[i+2].name}</a>\n                            </div>\n                        </div>\n                    )\n                } else if (i+2 <= allDevices.length) {\n                    rows.push(\n                        <div key={i} className=\"row\">\n                            <div key={allDevices[i].id} className=\"col-sm\">\n                                <a className=\"button\" href={`/devices/${allDevices[i].id}`}>Device {allDevices[i].name}</a>\n                            </div>\n                            <div key={allDevices[i+1].id} className=\"col-sm\">\n                                <a className=\"button\" href={`/devices/${allDevices[i+1].id}`}>Device {allDevices[i+1].name}</a>\n                            </div>\n                            <div key={999} className=\"col-sm\"></div>\n                        </div>\n                    )\n                } else if (i+1 <= allDevices.length) {\n                    rows.push(\n                        <div key={i} className=\"row\">\n                            <div key={allDevices[i].id} className=\"col-sm\">\n                                <a className=\"button\" href={`/devices/${allDevices[i].id}`}>Device {allDevices[i].name}</a>\n                            </div>\n                            <div key={999} className=\"col-sm\"></div>\n                            <div key={998} className=\"col-sm\"></div>\n                        </div>\n                    )\n                }\n            }\n\n            this.setState({devices: devices});\n            this.setState({rows: rows});\n        } catch (e) {\n            console.error(\"Failed to get data\", e);\n        }\n    }\n\n    // return promist after component mounts to DOM\n    componentDidMount() {\n        this.getDevices().then();\n    }\n\n    // render function - displays listing of devices as links \n    render() {\n        return (\n            <span className=\"responsive-padding\">\n                <div className=\"card fluid\">\n                    <div className=\"section\">\n                        <h1>Eagle Tracker Database</h1>\n                    </div>\n                    \n                    <div className=\"section double-padded\">\n                    <div className=\"container\">\n                        {(this.state as any).rows?.length ? (this.state as any).rows : 'Loading...'}\n                    </div>\n                    </div>\n                    \n                </div>\n            </span>\n        );\n    }\n\n}\n\nexport default Dashboard;\n"]},"metadata":{},"sourceType":"module"}