{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/nastassianguyen/Desktop/proj/EagleTracker/src/App.tsx\";\nimport React, { Component } from 'react';\nimport './App.css';\nimport { UserApi } from \"./lb-api\";\nimport { Configuration } from \"./lb-api/configuration\";\nimport { BrowserRouter as Router, Route, Link, Switch } from \"react-router-dom\";\nimport Dashboard from \"./Dashboard\";\nimport Map from \"./Map\";\nimport NotFound from './components/notfound';\nimport Card from './components/cards';\nexport class App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.renderDevices = routerProps => {\n      let deviceID = parseInt(routerProps.match.params.id);\n      let foundDevice = this.state.items.find(device => device.id === deviceID);\n      return foundDevice ? /*#__PURE__*/_jsxDEV(Card, {\n        device: foundDevice\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 31\n      }, this) : /*#__PURE__*/_jsxDEV(NotFound, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 62\n      }, this);\n    };\n\n    this.state = {\n      items: []\n    };\n  }\n\n  async getDevices() {\n    try {\n      const config = new Configuration();\n      const userApi = new UserApi(config);\n\n      try {\n        let token = await userApi.userLogin({\n          username: \"jpalad3@gatech.edu\",\n          password: \"EagleScouts4Life!\"\n        });\n        config.accessToken = token.id;\n        config.userId = `${token.userId}`;\n      } catch {\n        console.error('Login Failed');\n        alert('Login Fail');\n        return;\n      }\n\n      let allDevices = await userApi.userPrototypeGetDevices(config.userId, JSON.stringify({\n        where: {\n          lastConnection: {\n            gt: +new Date() - 7 * 24 * 3600 * 1000\n          }\n        }\n      }));\n      const items = [];\n\n      for (const device of allDevices) {\n        if (!device.id) continue; // prevent error on next line\n\n        items.push(device);\n      }\n\n      this.setState({\n        items\n      });\n    } catch (e) {\n      console.error(\"Failed to get data\", e);\n    }\n  }\n\n  componentDidMount() {\n    this.getDevices().then();\n    console.log(this.state);\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(Router, {\n      children: /*#__PURE__*/_jsxDEV(\"main\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/\",\n            children: \"Home\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/view-all\",\n            children: \"View All\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Switch, {\n          children: [/*#__PURE__*/_jsxDEV(Route, {\n            path: \"/\",\n            exact: true,\n            component: Dashboard\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/devices/:id\",\n            render: routerProps => this.renderDevices(routerProps)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/view-all\",\n            component: Map\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            component: NotFound\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }, this);\n  }\n\n}\nexport default App;","map":{"version":3,"sources":["/Users/nastassianguyen/Desktop/proj/EagleTracker/src/App.tsx"],"names":["React","Component","UserApi","Configuration","BrowserRouter","Router","Route","Link","Switch","Dashboard","Map","NotFound","Card","App","constructor","props","renderDevices","routerProps","deviceID","parseInt","match","params","id","foundDevice","state","items","find","device","getDevices","config","userApi","token","userLogin","username","password","accessToken","userId","console","error","alert","allDevices","userPrototypeGetDevices","JSON","stringify","where","lastConnection","gt","Date","push","setState","e","componentDidMount","then","log","render"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport './App.css';\nimport {UserApi} from \"./lb-api\";\nimport {Configuration} from \"./lb-api/configuration\";\nimport { BrowserRouter as Router, Route, Link, Switch } from \"react-router-dom\";\nimport Dashboard from \"./Dashboard\";\nimport Map from \"./Map\";\nimport NotFound from './components/notfound';\nimport Card from './components/cards';\n\nexport class App extends Component<{}, { items : any }> {\n    constructor(props:any) {\n        super(props);\n        this.state = { items: [] };\n    }\n\n    async getDevices() {\n        try {\n            const config = new Configuration();\n            const userApi = new UserApi(config);\n            try {\n                let token = await userApi.userLogin({username: \"jpalad3@gatech.edu\", password: \"EagleScouts4Life!\"});\n                config.accessToken = token.id;\n                config.userId = `${token.userId}`;\n\n            } catch {\n                console.error('Login Failed')\n                alert('Login Fail');\n                return;\n            }\n\n            let allDevices = await userApi.userPrototypeGetDevices(config.userId,\n                JSON.stringify({where: {lastConnection : {gt: +new Date() - 7 * 24 * 3600 * 1000} }})\n            );\n\n            const items: any[] = [];\n            for (const device of allDevices) {\n                if (!device.id) continue; // prevent error on next line\n                items.push(device)\n            }\n\n            this.setState({items});\n        } catch (e) {\n            console.error(\"Failed to get data\", e);\n        }\n    }\n\n    componentDidMount() {\n        this.getDevices().then();\n        console.log(this.state);\n    }\n\n    renderDevices = (routerProps) => {\n        let deviceID = parseInt(routerProps.match.params.id)\n        let foundDevice = (this.state as any).items.find(device => device.id === deviceID)\n        return (foundDevice ? <Card device={foundDevice}/> : <NotFound/>)\n      }\n\n    render() {\n        return (\n            <Router>\n                <main>\n                    <h3><Link to=\"/\">Home</Link></h3>\n                    <h3><Link to=\"/view-all\">View All</Link></h3>\n                    <Switch>\n                        <Route path=\"/\" exact component={Dashboard} />\n                        <Route path = '/devices/:id' render = {routerProps => this.renderDevices(routerProps)} />\n                        <Route path=\"/view-all\"  component={Map} />\n                        <Route component = {NotFound} />\n                    </Switch>\n                </main>\n            </Router>\n           );\n    }\n}\n\n  export default App;"]},"metadata":{},"sourceType":"module"}